<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.css" rel="stylesheet" />
</head>
<style>
*{

   font-family: 'Gotham Rounded SSm A', 'Gotham Rounded SSm B', 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

h1, h2, h3, h4, h5{
    font-weight: normal;
    text-decoration: none;

}

#avatar {
    float: left;
    width: 96px;
   padding-right: 50px;
   padding-bottom: 50px;
}


div.chart {
    padding-bottom: 50px;

   }


</style>
<body>
  <!-- Target DOM Node -->
  <a href='https://github.com/meeseeksbox'>
  <img id='avatar' src='https://avatars2.githubusercontent.com/u/23667696?s=200&v=4'>
  </a>
  <h1>Meeseeks Box Usage</h1>
  <div class='chart' id="keen-example-chart"></div>
  <div class='chart' id="keen-chart-2"></div>
  
  <script src="https://d26b395fwzu5fz.cloudfront.net/keen-analysis-1.2.2.js" type="text/javascript"></script>
  <script src="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.js" type="text/javascript"></script>
  <script type="text/javascript">
    var client = new Keen({
      projectId: "59e6286dc9e77c0001097979",
      readKey: "3ED31C47C7576FB00C2150C4DFE176EC96B379CE631051B89F83243160668F201FF1FCE12B97A5B579B4ACDA4282CD71BE218EF858963B70E89ACDFAEFE80053E9B6900C2DA61BD277F107B05D3ED16240DC5527B3C9BCCA6895DA8CF479B9E3"
    });
    
    var chart = new Keen.Dataviz()
      .el("#keen-example-chart")
      .height(320)
      .width('400px')
      .title("Activity / repository / week on a 35 week period")
      .type("bar")
      .stacked(true)
      .prepare();
    
    client
      .query("count", {
        event_collection: "dispatch",
        filters:[{"operator":"not_contains","property_name":"mention.repository","property_value":"/test1"}],
        group_by: ["mention.repository"],
        interval: "weekly",
        timeframe: "this_35_weeks",
        timezone: "US/Pacific"
      })
      .then(function(res) {
        chart.data(res).render();
      })
      .catch(function(err) {
        chart.message(err.message);
      });
    
    var chart2 = new Keen.Dataviz()
      .el("#keen-chart-2")
      .height(440)
      .width('400px')
      .title("Number of backport/Year/Project.")
      .type("table")
      .prepare();
    
    client
      .query("count", {
        event_collection: "dispatch",
        filters: [{"operator":"contains","property_name":"mention.command","property_value":"backport"}],
        group_by: ["mention.organisation"],
        timeframe: "this_1_years",
        timezone: "US/Pacific"
      })
      .then(function(res) {
        chart2.data(res).render();
      })
      .catch(function(err) {
        chart2.message(err.message);
      });
    
  </script>
</body>
</html>
